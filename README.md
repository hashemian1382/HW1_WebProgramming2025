<div dir="rtl">

# ุชฺฏ ุจุง ุญุณุงุจ ู ฺฉุชุงุจ - ุชูุฑู ุฏุณุชฺฏุฑู ุงูู ุจุฑูุงูู ููุณ ูุจ

<p align="center">
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/42/Sharif-University-of-Technology.jpg" alt="ููฺฏู ุฏุงูุดฺฏุงู ุตูุนุช ุดุฑู" width="200">
</p>

<p align="center">
  <b>ุฏุงูุดฺฏุงู ุตูุนุช ุดุฑู</b><br>
  ุฏุงูุดฺฉุฏู ูููุฏุณ ฺฉุงููพูุชุฑ<br>
  ุฏุฑุณ ุจุฑูุงููโููุณ ูุจ - ุจูุงุฑ ฑดฐด
  <br>ุงุณุชุงุฏ ุฏุฑุณ: ุฏฺฉุชุฑ ุญ ูพูุฑุณูุทุงู
</p>

<p align="center">
  <b>ุนู ูุงุดูุงู</b><br>
  ุดูุงุฑู ุฏุงูุดุฌู: ดฐฑฑฐถถธต
</p>

## ููุฏูู

ุงู ูพุฑูฺู ุฏุฑ ุฑุงุณุชุง ุชูุฑู ุฏุณุชฺฏุฑู ุงูู ุฏุฑุณ ุจุฑูุงููโููุณ ูุจ ุจุง ุนููุงู "ุชฺฏ ุจุง ุญุณุงุจ ู ฺฉุชุงุจ" ุงูุฌุงู ุดุฏู ุงุณุช. ูุฏู ุงุฒ ุงู ูพุฑูฺูุ ูพุงุฏูโุณุงุฒ ฺฉ ูุญุงุณุจูโฺฏุฑ ูพูุง ุจุง ุงุณุชูุงุฏู ุงุฒ JavaScript ู DOM ุงุณุช ฺฉู ุจุชูุงูุฏ ุจุฑ ุงุณุงุณ ูุฑูุฏโูุง ฺฉุงุฑุจุฑุ ูุญุงุณุจุงุช ุฑุง ุจู ุตูุฑุช ุขู ุงูุฌุงู ุฏูุฏ. ุงู ุงุจุฒุงุฑ ูโุชูุงูุฏ ุฏุฑ ุทุฑุงุญ ูุฑูโูุง ุชุนุงูู ู ุฏุงุดุจูุฑุฏูุง ูพูุง ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ุจุงุดุฏ.

## ุดุฑุญ ูุณุฆูู

ุฏุฑ ุงู ูพุฑูฺูุ ูุฏู ุงุฌุงุฏ ฺฉ ุชฺฏ ุณูุงุฑุด `<formula>` ุงุณุช ฺฉู ูโุชูุงูุฏ ุนุจุงุฑุงุช ุฑุงุถ ุฑุง ุจุฑ ุงุณุงุณ ููุงุฏุฑ ูุฑูุฏโูุง HTML ูุญุงุณุจู ฺฉูุฏ. ุงู ุชฺฏ ุฏุงุฑุง ฺฉ ูฺฺฏ `evaluator` ุงุณุช ฺฉู ูุฑููู ูุญุงุณุจุงุช ุฑุง ุฏุฑ ุฎูุฏ ูฺฏู ูโุฏุงุฑุฏ. ุจุง ุชุบุฑ ูุฑ ฺฉ ุงุฒ ูุฑูุฏโูุงุ ูุชุฌู ูุญุงุณุจู ุจู ุตูุฑุช ุขู ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.

ูุฒุงุง ุงู ุฑูฺฉุฑุฏ ุดุงูู:
- ฺฉุงูุด ูุงุฒ ุจู ฺฉุฏููุณ ูุฌุฏุฏ ุจุฑุง ูุญุงุณุจุงุช ูุฎุชูู
- ุงูุฒุงุด ุชุนุงูู ุจูุฏู ูุฑูโูุง ุจุฏูู ูุงุฒ ุจู ุงุฑุณุงู ุฏุงุฏู ุจู ุณุฑูุฑ
- ุจูุจูุฏ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจุง ููุงุด ูุชุงุฌ ุจู ุตูุฑุช ุขู

## ุชฺฉููููฺ ูุง ุงุณุชูุงุฏู ุดุฏู
![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)

## ุณุงุฎุชุงุฑ ูพุฑูฺู

ูพุฑูฺู ุงุฒ ุณู ูุงู ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช:

1. **index.html**: ุณุงุฎุชุงุฑ HTML ุตูุญู ู ุชุนุฑู ุชฺฏโูุง `<formula>`
2. **script.js**: ููุทู ุฌุงูุงุงุณฺฉุฑูพุช ุจุฑุง ูุญุงุณุจู ูุฑูููโูุง
3. **style.css**: ุงุณุชุงูโุฏู ุจู ุตูุญู ู ุงููุงูโูุง

### ุณุงุฎุชุงุฑ HTML
```html
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชูุฑู ุฏุณุชฺฏุฑู ุงูู ุจุฑูุงูู ููุณ ูุจ: ุชฺฏ ุจุง ุญุณุงุจ ู ฺฉุชุงุจ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>ุชฺฏ ุจุง ุญุณุงุจ ู ฺฉุชุงุจ</h1>

        <div class="formula-container">
            <div class="input-grid">
                <input type="text" id="fee" placeholder="ููุช ูุงุญุฏ">
                <input type="text" id="count" placeholder="ุชุนุฏุงุฏ">
                <input type="text" id="discount" placeholder="ุชุฎูู">
            </div>
            <div class="formula-output">
                ููุช ููุง: <formula evaluator="count*fee-discount"></formula>
            </div>
        </div>

        <div class="formula-container">
            <div class="input-grid">
                <input type="text" id="width" placeholder="ุนุฑุถ">
                <input type="text" id="height" placeholder="ุงุฑุชูุงุน">
            </div>
            <div class="formula-output">
                ูุณุงุญุช: <formula evaluator="width*height"></formula>
            </div>
        </div>

        <div class="formula-container">
            <div class="input-grid">
                <input type="text" id="number1" placeholder="ุนุฏุฏ ุงูู">
                <input type="text" id="number2" placeholder="ุนุฏุฏ ุฏูู">
            </div>
            <div class="formula-output">
                ูุฑููู ูุงูุนุชุจุฑ: <formula evaluator="number1#number2"></formula>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
```

## ูุญูู ูพุงุฏูโุณุงุฒ

### ฺฉูุงุณ FormulaElement

ููุจ ุงู ูพุฑูฺูุ ฺฉูุงุณ `FormulaElement` ุงุณุช ฺฉู ุจุฑุง ูุฑ ุชฺฏ `<formula>` ฺฉ ููููู ุงุฒ ุขู ุงุฌุงุฏ ูโุดูุฏ. ุงู ฺฉูุงุณ ุจู ุตูุฑุช ุดโฺฏุฑุง ุทุฑุงุญ ุดุฏู ู ูุณุฆููุชโูุง ูุฎุชูู ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ.

```javascript
class FormulaElement {
    static FORMULA_REGEX = /^[a-zA-Z0-9+\-*\/()\s.]+$/;

    constructor(element) {
        this.element = element;
        this.formula = element.getAttribute('evaluator');
        this.inputs = this.findInputElements();
        this.setupEventListeners();
        this.calculate();
    }

    findInputElements() {
        const operators = new Set(['+', '-', '*', '/', '(', ')']);
        const inputIds = [...new Set(this.formula.match(/([a-zA-Z0-9]+)/g) || [])]
            .filter(id => !operators.has(id));
        return inputIds.map(id => document.getElementById(id)).filter(Boolean);
    }

    setupEventListeners() {
        this.inputs.forEach(input => input.addEventListener('input', () => this.calculate()));
    }

    calculate() {
        if (!this.isValidFormula(this.formula)) {
            this.element.textContent = 'Invalid Formula';
            return;
        }

        let hasInvalidInput = false;
        const values = this.inputs.reduce((acc, input) => {
            const isValid = input.value.trim() !== '' && /^-?\d*\.?\d+$/.test(input.value);
            if (!isValid) hasInvalidInput = true;
            acc[input.id] = isValid ? parseFloat(input.value) : 0;
            return acc;
        }, {});

        if (hasInvalidInput) {
            this.element.textContent = 'Unknown';
            return;
        }

        try {
            const evalFunction = new Function(...Object.keys(values), `return ${this.formula};`);
            const result = evalFunction(...Object.values(values));
            
            this.element.textContent = 
                typeof result === 'number' && !isNaN(result) ? result.toFixed(2) : 'Invalid Formula';
        } catch (error) {
            this.element.textContent = 'Invalid Formula';
        }
    }

    isValidFormula(formula) {
        return FormulaElement.FORMULA_REGEX.test(formula);
    }
}

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('[evaluator]').forEach(element => new FormulaElement(element));
});
```

ฺฉูุงุณ `FormulaElement` ุฏุงุฑุง ูุชุฏูุง ุฒุฑ ุงุณุช:

1. **constructor**: ููุฏุงุฑุฏู ุงููู ู ุฑุงูโุงูุฏุงุฒ ูุญุงุณุจูโฺฏุฑ
2. **findInputElements**: ุดูุงุณุง ู ุงุณุชุฎุฑุงุฌ ุงููุงูโูุง ูุฑูุฏ ูุฑุชุจุท ุจุง ูุฑููู
3. **setupEventListeners**: ุชูุธู ุดูููุฏูโูุง ุฑูุฏุงุฏ ุจุฑุง ูุฑูุฏโูุง
4. **calculate**: ูุญุงุณุจู ูุชุฌู ูุฑููู ุจุฑ ุงุณุงุณ ููุงุฏุฑ ูุฑูุฏ
5. **isValidFormula**: ุจุฑุฑุณ ุงุนุชุจุงุฑ ูุฑููู ูุฑูุฏ

### ุฑููุฏ ุงุฌุฑุง

1. ุจุง ุจุงุฑฺฏุฐุงุฑ ฺฉุงูู DOMุ ุดูููุฏู ุฑูุฏุงุฏ `DOMContentLoaded` ูุนุงู ูโุดูุฏ.
2. ุชูุงู ุงููุงูโูุง ฺฉู ูฺฺฏ `evaluator` ุฏุงุฑูุฏ ุดูุงุณุง ูโุดููุฏ.
3. ุจุฑุง ูุฑ ุงููุงูุ ฺฉ ููููู ุงุฒ ฺฉูุงุณ `FormulaElement` ุงุฌุงุฏ ูโุดูุฏ.
4. ุฏุฑ ุณุงุฒูุฏู ฺฉูุงุณุ ุงุจุชุฏุง ูุฑููู ุงุณุชุฎุฑุงุฌ ูโุดูุฏ ู ุงููุงูโูุง ูุฑูุฏ ูุฑุชุจุท ุดูุงุณุง ูโุดููุฏ.
5. ุจุฑุง ูุฑ ุงููุงู ูุฑูุฏุ ฺฉ ุดูููุฏู ุฑูุฏุงุฏ `input` ุชูุธู ูโุดูุฏ ุชุง ุจุง ุชุบุฑ ููุฏุงุฑุ ูุญุงุณุจู ูุฌุฏุฏ ุงูุฌุงู ุดูุฏ.
6. ูุญุงุณุจู ุงููู ุงูุฌุงู ูโุดูุฏ ุชุง ุฏุฑ ุตูุฑุช ูุฌูุฏ ููุงุฏุฑ ูพุดโูุฑุถุ ูุชุฌู ููุงุด ุฏุงุฏู ุดูุฏ.
7. ุจุง ูุฑ ุชุบุฑ ุฏุฑ ูุฑูุฏโูุงุ ูุชุฏ `calculate` ูุฑุงุฎูุงู ุดุฏู ู ูุชุฌู ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.



**ุชูุถุญุงุช ุฌุฒุฆ ุชุฑ ูุงู ุฌุงูุงุงุณฺฉุฑูพุช**

ุงู ฺฉุฏ ุงุฒ ุฏู ุจุฎุด ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช:

1.  **ฺฉูุงุณ `FormulaElement`:**
    *   ุงู ฺฉูุงุณ ูุบุฒ ูุชูฺฉุฑ ูุญุงุณุจุงุช ูุงุณุช. ูุฑ ุนูุตุฑ HTML ฺฉู ุจุฎูุงูุฏ ูุฑููู ุฑุง ูุญุงุณุจู ฺฉูุฏุ ฺฉ ููููู ุงุฒ ุงู ฺฉูุงุณ ุจุฑุงุด ุณุงุฎุชู ูโุดูุฏ.
    *   **`constructor(element)`:**
        *   `element`: ุนูุตุฑ HTML ฺฉู ูุฑููู ุฏุฑ ุขู ูุฑุงุฑ ุฏุงุฑุฏ (ูุซูุงู ฺฉ `<div>` ุง `<span>`).
        *   `this.formula`: ูุฑููู ุฑุงุถ ุฑุง ุงุฒ ุตูุช `evaluator` ุนูุตุฑ HTML ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ.
        *   `this.inputs`: ุนูุงุตุฑ ูุฑูุฏ (input) ูุฑุชุจุท ุจุง ูุฑููู ุฑุง ูพุฏุง ูโฺฉูุฏ ู ุฐุฎุฑู ูโฺฉูุฏ.
        *   `setupEventListeners()`: ุจู ุชุบุฑุงุช ุฏุฑ ููุฏูุง ูุฑูุฏ ฺฏูุด ูโุฏูุฏ ุชุง ูุฑ ููุช ููุฏุงุฑุดุงู ุนูุถ ุดุฏุ ูุฑููู ุฏูุจุงุฑู ูุญุงุณุจู ุดูุฏ.
        *   `calculate()`: ุชุงุจุน ุงุตู ุจุฑุง ูุญุงุณุจูโ ูุฑููู.

    *   **`findInputElements()`:**
        *   ุงู ุชุงุจุน ูุธููโ ุดูุงุณุง ููุฏูุง ูุฑูุฏ ูุฑุชุจุท ุจุง ูุฑููู ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ.
        *   ุงุจุชุฏุง ูุฑููู ุฑุง ุชุฌุฒู ูโฺฉูุฏ ุชุง ุดูุงุณูโูุง (ID) ููุฏูุง ูุฑูุฏ ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ (ูุซูุงู ุฏุฑ ูุฑููู `a + b * c`ุ ุดูุงุณูโูุง `a`ุ `b` ู `c` ูุณุชูุฏ).
        *   ุณูพุณ ุจุง ุงุณุชูุงุฏู ุงุฒ `document.getElementById()`ุ ุนูุงุตุฑ HTML ูุชูุงุธุฑ ุจุง ุงู ุดูุงุณูโูุง ุฑุง ูพุฏุง ูโฺฉูุฏ.

    *   **`setupEventListeners()`:**
        *   ุงู ุชุงุจุน ุจู ุณุงุฏฺฏ ุจู ูุฑ ฺฉ ุงุฒ ููุฏูุง ูุฑูุฏ ฺฏูุด ูโุฏูุฏ. ูุฑ ุฒูุงู ฺฉู ฺฉุงุฑุจุฑ ููุฏุงุฑ ุฑุง ุฏุฑ ููุฏ ูุงุฑุฏ ฺฉูุฏ ุง ุชุบุฑ ุฏูุฏ (ุฑูุฏุงุฏ `input`)ุ ุชุงุจุน `calculate()` ูุฑุงุฎูุงู ูโุดูุฏ ุชุง ูุฑููู ุฏูุจุงุฑู ูุญุงุณุจู ุดูุฏ.

    *   **`calculate()`:**
        *   ุงู ุชุงุจุน ููุจ ุชูพูุฏูโ ูุญุงุณุจุงุช ุงุณุช.
        *   ุงุจุชุฏุง ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ูุฑููู ูุนุชุจุฑ ุงุณุช ุง ุฎุฑ (ุจุง ุงุณุชูุงุฏู ุงุฒ `isValidFormula()`).
        *   ุณูพุณ ููุงุฏุฑ ูุงุฑุฏ ุดุฏู ุฏุฑ ููุฏูุง ูุฑูุฏ ุฑุง ูโุฎูุงูุฏ.
            *   ุงฺฏุฑ ููุฏุงุฑ ฺฉ ููุฏ ุฎุงู ุจุงุดุฏ ุง ุนุฏุฏ ูุจุงุดุฏุ ููุฏุงุฑ ูพุดโูุฑุถ 0 ุจุฑุง ุขู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดูุฏ.
            *   ุงฺฏุฑ ูุฑ ฺฉ ุงุฒ ููุฏูุง ููุฏุงุฑ ูุงูุนุชุจุฑ ุฏุงุดุชู ุจุงุดูุฏุ ูุชุฌูโ ููุง "Unknown" ุฎูุงูุฏ ุจูุฏ.
        *   ุฏุฑ ููุงุชุ ุจุง ุงุณุชูุงุฏู ุงุฒ `new Function()`ุ ูุฑููู ุฑุง ุจู ฺฉ ุชุงุจุน ุฌุงูุงุงุณฺฉุฑูพุช ุชุจุฏู ูโฺฉูุฏ ู ุขู ุฑุง ุงุฌุฑุง ูโฺฉูุฏ.
            *   ุงฺฏุฑ ูุฑููู ูุนุชุจุฑ ุจุงุดุฏ ู ูููโ ูุฑูุฏโูุง ููุงุฏุฑ ุนุฏุฏ ุฏุงุดุชู ุจุงุดูุฏุ ูุชุฌูโ ูุญุงุณุจู ุดุฏู (ุจุง ุฏู ุฑูู ุงุนุดุงุฑ) ููุงุด ุฏุงุฏู ูโุดูุฏ.
            *   ุฏุฑ ุบุฑ ุงู ุตูุฑุช (ูุซูุงู ุงฺฏุฑ ูุฑููู ูุงูุนุชุจุฑ ุจุงุดุฏ ุง ุฎุทุง ุฏุฑ ุญู ูุญุงุณุจู ุฑุฎ ุฏูุฏ)ุ ูพุงู "Invalid Formula" ููุงุด ุฏุงุฏู ูโุดูุฏ.

    *   **`isValidFormula(formula)`:**
        *   ุงู ุชุงุจุน ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ูุฑููู ุงุฒ ูุธุฑ ุณุงุฎุชุงุฑ ูุนุชุจุฑ ุงุณุช ุง ุฎุฑ.
        *   ุงุฒ ฺฉ ุนุจุงุฑุช ููุธู (Regular Expression) ุงุณุชูุงุฏู ูโฺฉูุฏ ุชุง ูุทูุฆู ุดูุฏ ฺฉู ูุฑููู ููุท ุดุงูู ุญุฑููุ ุงุนุฏุงุฏุ ุนููฺฏุฑูุง ุฑุงุถ (`+`ุ `-`ุ `*`ุ `/`)ุ ูพุฑุงูุชุฒ ู ูุงุตูู ุงุณุช.

2.  **ุฑุงู ุงูุฏุงุฒ ุงููู:**

    *   `document.addEventListener('DOMContentLoaded', ...)`:
        *   ุงู ฺฉุฏ ููุชุธุฑ ูโูุงูุฏ ุชุง ฺฉู ุตูุญู HTML ุจุงุฑฺฏุฐุงุฑ ุดูุฏ.
        *   ุณูพุณุ ุชูุงู ุนูุงุตุฑ ฺฉู ุตูุช `evaluator` ุฏุงุฑูุฏ ุฑุง ูพุฏุง ูโฺฉูุฏ (`querySelectorAll('[evaluator]')`).
        *   ุจุฑุง ูุฑ ฺฉ ุงุฒ ุงู ุนูุงุตุฑุ ฺฉ ููููู ุงุฒ ฺฉูุงุณ `FormulaElement` ูโุณุงุฒุฏ ุชุง ูุญุงุณุจุงุช ูุฑููู ูุฑุจูุท ุจู ุขู ุนูุตุฑ ุงูุฌุงู ุดูุฏ.


<div dir="rtl">


ฺฉุฏ ุงุฒ ุฏู ุจุฎุด ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช:

1.  **ฺฉูุงุณ `FormulaElement`:**
    *   **`constructor(element)`:**
        *   `element`: ุนูุตุฑ HTML ุดุงูู ูุฑููู.
        *   `this.formula`: ุงุณุชุฎุฑุงุฌ ูุฑููู ุงุฒ ุตูุช `evaluator`.
        *   `this.inputs`: ุงูุชู ููุฏูุง ูุฑูุฏ ูุฑุชุจุท.
        *   `setupEventListeners()`:  ฺฏูุด ุฏุงุฏู ุจู ุชุบุฑุงุช ููุฏูุง ูุฑูุฏ.
        *   `calculate()`: ุชุงุจุน ุงุตู ูุญุงุณุจู.
    *   **`findInputElements()`:** ุดูุงุณุง ููุฏูุง ูุฑูุฏ ุจุง ุชุฌุฒูโ ูุฑููู ู ุงุณุชุฎุฑุงุฌ ID ุขูโูุง.
    *   **`setupEventListeners()`:** ุงุชุตุงู `event listener` ุจู ููุฏูุง ูุฑูุฏ ุจุฑุง ูุฑุงุฎูุงู `calculate()` ุฏุฑ ุฑูุฏุงุฏ `input`.
    *   **`calculate()`:** ุจุฑุฑุณ ุงุนุชุจุงุฑ ูุฑูููุ ุฎูุงูุฏู ููุงุฏุฑ ูุฑูุฏุ ุชุจุฏู ูุฑููู ุจู ุชุงุจุน JS ู ุงุฌุฑุง ุขู. ููุงุด ูุชุฌู ุง ูพุงู ุฎุทุง.
    *   **`isValidFormula(formula)`:** ุจุฑุฑุณ ุงุนุชุจุงุฑ ุณุงุฎุชุงุฑ ูุฑููู ุจุง ุงุณุชูุงุฏู ุงุฒ ุนุจุงุฑุช ููุธู: `FORMULA_REGEX = /^[a-zA-Z0-9+\-*\/()\s.]+$/`.

2.  **ุฑุงูโุงูุฏุงุฒ ุงููู:**
    *   `document.addEventListener('DOMContentLoaded', ...)`:  ุงูุชุธุงุฑ ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉุงูู ุตูุญูุ ุงูุชู ุนูุงุตุฑ ุฏุงุฑุง `evaluator` ู ุงุฌุงุฏ ููููู `FormulaElement` ุจุฑุง ูุฑ ฺฉุฏุงู.

</div>



### ๐งฑ ุณุงุฎุชุงุฑ ฺฉู ฺฉูุงุณ FormulaElement

ุงู ฺฉูุงุณ ููฺฏุงู ุจุงุฑฺฏุฐุงุฑ ุตูุญู (DOMContentLoaded) ุจุฑุง ูุฑ ุนูุตุฑ ฺฉู ูฺฺฏ evaluator ุฏุงุฑุฏุ ฺฉ ููููู ุฌุฏุฏ ูโุณุงุฒุฏ ู ูุฑุงุญู ุฒุฑ ุฑุง ุงูุฌุงู ูโุฏูุฏ:

---

### ๐น ฑ. ูฺฺฏ ุซุงุจุช FORMULA_REGEX

static FORMULA_REGEX = /^[a-zA-Z0-9+\-*\/()\s.]+$/;

ุงู ุนุจุงุฑุช ููุธู (Regex) ูุดุฎุต ูโฺฉูุฏ ฺู ูุฑูููโูุง ูุนุชุจุฑ ูุณุชูุฏ. ููุท ุญุฑููุ ุงุนุฏุงุฏุ ุนููฺฏุฑูุง ุฑุงุถุ ูพุฑุงูุชุฒุ ูุงุตูู ู ููุทู ูุฌุงุฒ ูุณุชูุฏ.

---

### ๐น ฒ. ุณุงุฒูุฏู ฺฉูุงุณ constructor

constructor(element) {
    this.element = element;
    this.formula = element.getAttribute('evaluator');
    this.inputs = this.findInputElements();
    this.setupEventListeners();
    this.calculate();
}

ุฏุฑ ุงู ุจุฎุด:

- ุนูุตุฑ HTML ุฐุฎุฑู ูโุดูุฏ.
- ููุฏุงุฑ ูุฑููู ุงุฒ ูฺฺฏ evaluator ุฎูุงูุฏู ูโุดูุฏ.
- ูุฑูุฏโูุง ฺฉู ุฏุฑ ูุฑููู ุงุณุชูุงุฏู ุดุฏูโุงูุฏุ ุดูุงุณุง ูโุดููุฏ.
- ุจุฑุง ูุฑ ูุฑูุฏุ ฺฉ event listener ุจุฑุง ุดูุฏู ุชุบุฑุงุช ููุฏุงุฑ ุงุฌุงุฏ ูโุดูุฏ.
- ูุญุงุณุจู ุงููู ูุฑููู ุงูุฌุงู ูโุดูุฏ.

---

### ๐น ณ. ุชุงุจุน findInputElements

findInputElements() {
    const operators = new Set(['+', '-', '*', '/', '(', ')']);
    const inputIds = [...new Set(this.formula.match(/([a-zA-Z0-9]+)/g) || [])]
        .filter(id => !operators.has(id));
    return inputIds.map(id => document.getElementById(id)).filter(Boolean);
}

ุงู ุชุงุจุน:

- ุขโุฏโูุง ฺฉู ุฏุฑ ูุฑููู ุขูุฏูโุงูุฏ ู ูุฑุจูุท ุจู ูุฑูุฏโูุง ูุณุชูุฏ (ูู ุนููฺฏุฑูุง) ุฑุง ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ.
- ุงุฒ ุทุฑู document.getElementById ุนูุงุตุฑ ูุฑูุฏ ุฑุง ูพุฏุง ูโฺฉูุฏ ู ุฏุฑ ุขุฑุงูโุง ุจุฑูโฺฏุฑุฏุงูุฏ.

---

### ๐น ด. ุชุงุจุน setupEventListeners

setupEventListeners() {
    this.inputs.forEach(input => input.addEventListener('input', () => this.calculate()));
}

ุจุฑุง ุชูุงู ูุฑูุฏโูุง ฺฉ ุฑูุฏุงุฏ input ุชุนุฑู ูโุดูุฏ ุชุง ูุฑ ุจุงุฑ ฺฉู ููุฏุงุฑ ูุฑูุฏ ุชุบุฑ ฺฉุฑุฏุ ุฏูุจุงุฑู ููุฏุงุฑ ูุฑููู ูุญุงุณุจู ุดูุฏ.

---

### ๐น ต. ุชุงุจุน calculate

calculate() {
    if (!this.isValidFormula(this.formula)) {
        this.element.textContent = 'Invalid Formula';
        return;
    }

    let hasInvalidInput = false;
    const values = this.inputs.reduce((acc, input) => {
        const isValid = input.value.trim() !== '' && /^-?\d*\.?\d+$/.test(input.value);
        if (!isValid) hasInvalidInput = true;
        acc[input.id] = isValid ? parseFloat(input.value) : 0;
        return acc;
    }, {});

    if (hasInvalidInput) {
        this.element.textContent = 'Unknown';
        return;
    }

    try {
        const evalFunction = new Function(...Object.keys(values), `return ${this.formula};`);
        const result = evalFunction(...Object.values(values));
        
        this.element.textContent = 
            typeof result === 'number' && !isNaN(result) ? result.toFixed(2) : 'Invalid Formula';
    } catch (error) {
        this.element.textContent = 'Invalid Formula';
    }
}

ุฏุฑ ุงู ุจุฎุด:

- ุงุจุชุฏุง ุจุฑุฑุณ ูโุดูุฏ ฺฉู ูุฑููู ูุนุชุจุฑ ุงุณุช ุง ูู.
- ููุงุฏุฑ ูุฑูุฏโูุง ุจุฑุฑุณ ู ุชุจุฏู ุจู ุนุฏุฏ ูโุดููุฏ.
- ุงฺฏุฑ ูุฑ ูุฑูุฏ ูุงูุนุชุจุฑ ุจุงุดุฏุ ููุฏุงุฑ ููุง "Unknown" ููุงุด ุฏุงุฏู ูโุดูุฏ.
- ุฏุฑ ุตูุฑุช ูุนุชุจุฑ ุจูุฏู ููู ฺุฒุ ฺฉ ุชุงุจุน ุจุง ุงุณุชูุงุฏู ุงุฒ new Function ุณุงุฎุชู ุดุฏู ู ูุฑููู ุงุฌุฑุง ูโุดูุฏ.
- ูุชุฌู ููุง ุจุง ุฏู ุฑูู ุงุนุดุงุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ.

---

### ๐น ถ. ุชุงุจุน isValidFormula

isValidFormula(formula) {
    return FormulaElement.FORMULA_REGEX.test(formula);
}

ููุท ูุฑูููโูุง ุฑุง ุชุฃุฏ ูโฺฉูุฏ ฺฉู ุจุง ุงูฺฏู ูุฌุงุฒ ูุทุงุจูุช ุฏุงุดุชู ุจุงุดูุฏ.

---

### ๐น ท. ููุฏุงุฑุฏู ุงููู ููฺฏุงู ุจุงุฑฺฏุฐุงุฑ ุตูุญู

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('[evaluator]').forEach(element => new FormulaElement(element));
});

ุจุง ุจุงุฑฺฏุฐุงุฑ ฺฉุงูู ุตูุญูุ ุชูุงู ุนูุงุตุฑ ฺฉู ูฺฺฏ evaluator ุฏุงุฑูุฏ ุดูุงุณุง ุดุฏู ู ุจุฑุง ูุฑ ฺฉุฏุงู ฺฉ ุดุก FormulaElement ุณุงุฎุชู ูโุดูุฏ.




## ููููู ุงุณุชูุงุฏู

ุฏุฑ ุงู ูพุฑูฺูุ ุณู ููููู ูุฑููู ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช:

1. **ูุญุงุณุจู ููุช ุจุง ุชุฎูู**: `count*fee-discount`
   ```html
   <div class="formula-container">
       <div class="input-grid">
           <input type="text" id="fee" placeholder="ููุช ูุงุญุฏ">
           <input type="text" id="count" placeholder="ุชุนุฏุงุฏ">
           <input type="text" id="discount" placeholder="ุชุฎูู">
       </div>
       <div class="formula-output">
           ููุช ููุง: <formula evaluator="count*fee-discount"></formula>
       </div>
   </div>
   ```

2. **ูุญุงุณุจู ูุณุงุญุช**: `width*height`
   ```html
   <div class="formula-container">
       <div class="input-grid">
           <input type="text" id="width" placeholder="ุนุฑุถ">
           <input type="text" id="height" placeholder="ุงุฑุชูุงุน">
       </div>
       <div class="formula-output">
           ูุณุงุญุช: <formula evaluator="width*height"></formula>
       </div>
   </div>
   ```

3. **ูุฑููู ุจุง ุนููฺฏุฑ ูุงูุนุชุจุฑ**: `number1#number2`
   ```html
   <div class="formula-container">
       <div class="input-grid">
           <input type="text" id="number1" placeholder="ุนุฏุฏ ุงูู">
           <input type="text" id="number2" placeholder="ุนุฏุฏ ุฏูู">
       </div>
       <div class="formula-output">
           ูุฑููู ูุงูุนุชุจุฑ: <formula evaluator="number1#number2"></formula>
       </div>
   </div>
   ```

## ฺุงูุดโูุง ู ุฑุงูโุญูโูุง

ุฏุฑ ุทูู ูพุงุฏูโุณุงุฒ ุงู ูพุฑูฺู ุจุง ฺุงูุดโูุง ูุชุนุฏุฏ ููุงุฌู ุดุฏู ฺฉู ุฑุงูโุญูโูุง ููุงุณุจ ุจุฑุง ุขูโูุง ูพุฏุง ฺฉุฑุฏู:

### 1. ุงุณุชุฎุฑุงุฌ ุดูุงุณูโูุง ูุฑูุฏ ุงุฒ ูุฑููู

**ฺุงูุด**: ุชุดุฎุต ุดูุงุณูโูุง ูุฑูุฏ ุงุฒ ุนููฺฏุฑูุง ู ฺฉููุงุช ฺฉูุฏ ุฏุฑ ูุฑููู

**ุฑุงูโุญู**: ุงุณุชูุงุฏู ุงุฒ ุนุจุงุฑุช ููุธู ุจุฑุง ุงุณุชุฎุฑุงุฌ ููู ฺฉููุงุช ู ุณูพุณ ููุชุฑ ฺฉุฑุฏู ุนููฺฏุฑูุง:

```javascript
const operators = new Set(['+', '-', '*', '/', '(', ')']);
const inputIds = [...new Set(this.formula.match(/([a-zA-Z0-9]+)/g) || [])]
    .filter(id => !operators.has(id));
```

ุงู ุฑูุด ุงุจุชุฏุง ููู ฺฉููุงุช ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ Regex ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏุ ุณูพุณ ุนููฺฏุฑูุง ุดูุงุฎุชู ุดุฏู ุฑุง ุญุฐู ูโฺฉูุฏ ุชุง ููุท ุดูุงุณูโูุง ูุฑูุฏ ุจุงู ุจูุงููุฏ. ุงุณุชูุงุฏู ุงุฒ `Set` ูุฒ ุงุฒ ุชฺฉุฑุงุฑ ุดูุงุณูโูุง ุฌููฺฏุฑ ูโฺฉูุฏ.


ุงู ุฑูุด ุงุจุชุฏุง ุจุง ุงุณุชูุงุฏู ุงุฒ Regex ุงุทููุงู ุญุงุตู ูโฺฉูุฏ ฺฉู ูุฑููู ููุท ุดุงูู ฺฉุงุฑุงฺฉุชุฑูุง ูุฌุงุฒ ุงุณุชุ ุณูพุณ ุงุฒ `Function` ุจุฑุง ุงุฌุงุฏ ฺฉ ุชุงุจุน ูพูุง ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ููุงุฏุฑ ูุฑูุฏ ุฑุง ุจู ุนููุงู ูพุงุฑุงูุชุฑ ูโฺฏุฑุฏ ู ูุฑููู ุฑุง ุงุฑุฒุงุจ ูโฺฉูุฏ.

### 2. ูุฏุฑุช ูุฑูุฏโูุง ูุงูุนุชุจุฑ

**ฺุงูุด**: ุฑุณุฏฺฏ ุจู ูุฑูุฏโูุง ุบุฑ ุนุฏุฏุ ุฎุงู ุง ูุงูุนุชุจุฑ

**ุฑุงูโุญู**: ุจุฑุฑุณ ุงุนุชุจุงุฑ ูุฑ ูุฑูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุนุจุงุฑุช ููุธู ู ููุงุด ูพุงู ููุงุณุจ:

```javascript
let hasInvalidInput = false;
const values = this.inputs.reduce((acc, input) => {
    const isValid = input.value.trim() !== '' && /^-?\d*\.?\d+$/.test(input.value);
    if (!isValid) hasInvalidInput = true;
    acc[input.id] = isValid ? parseFloat(input.value) : 0;
    return acc;
}, {});

if (hasInvalidInput) {
    this.element.textContent = 'Unknown';
    return;
}
```

ุงู ฺฉุฏ ูุฑ ูุฑูุฏ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ ุชุง ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุฎุงู ูุณุช ู ฺฉ ุนุฏุฏ ูุนุชุจุฑ ุงุณุช. ุงฺฏุฑ ูุฑ ฺฉ ุงุฒ ูุฑูุฏโูุง ูุงูุนุชุจุฑ ุจุงุดุฏุ ูพุงู "Unknown" ููุงุด ุฏุงุฏู ูโุดูุฏ.

### 3. ูุฏุฑุช ูุชุงุฌ ูุงูุนุชุจุฑ

**ฺุงูุด**: ุฑุณุฏฺฏ ุจู ูุชุงุฌ ูุงูุนุชุจุฑ ูุญุงุณุจุงุช (ูุงููุฏ ุชูุณู ุจุฑ ุตูุฑ ุง ูุชุงุฌ `NaN`)

**ุฑุงูโุญู**: ุจุฑุฑุณ ููุน ู ููุฏุงุฑ ูุชุฌู ูุจู ุงุฒ ููุงุด:

```javascript
this.element.textContent = 
    typeof result === 'number' && !isNaN(result) ? result.toFixed(2) : 'Invalid Formula';
```

ุงู ุจุฑุฑุณ ุงุทููุงู ูโุฏูุฏ ฺฉู ูุชุฌู ฺฉ ุนุฏุฏ ูุนุชุจุฑ ุงุณุชุ ุณูพุณ ุขู ุฑุง ุจุง ุฏู ุฑูู ุงุนุดุงุฑ ููุงุด ูโุฏูุฏ.



## ููุงุจุน

- MDN Web Docs - [Working with objects](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects)
- MDN Web Docs - [Document Object Model (DOM)](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model)
- MDN Web Docs - [Regular expressions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)
- MDN Web Docs - [Function constructor](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/Function)

</div>
