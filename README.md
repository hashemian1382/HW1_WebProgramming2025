<div dir="rtl">

# 🎓 تمرین درس برنامه‌نویسی وب - بهار ۱۴۰۴

<img src="https://upload.wikimedia.org/wikipedia/commons/4/42/Sharif-University-of-Technology.jpg" width="120" alt="لوگوی دانشگاه صنعتی شریف" style="display: block; margin: 0 auto;">

**استاد درس:** دکتر یحیی پورسلطانی  
**دانشجو:** علی هاشمیان  
**شماره دانشجویی:** ۴۰۱۱۰۶۶۸۵  

## 🌟 معرفی پروژه
این پروژه یک ماشین حساب پویا است که به صورت بلادرنگ (Real-time) محاسبات ریاضی را بر اساس مقادیر ورودی کاربر انجام می‌دهد. این تمرین با هدف یادگیری مفاهیم زیر طراحی شده است:

- کار با رویدادها در JavaScript
- پردازش بلادرنگ ورودی‌های کاربر
- پیاده‌سازی محاسبات پویا
- مدیریت خطا در محاسبات

## ✨ ویژگی‌های پروژه
- ✅ محاسبه خودکار نتایج با تغییر مقادیر ورودی
- ✅ پشتیبانی از چهار عمل اصلی ریاضی (+، -، *، /)
- ✅ نمایش نتایج با دو رقم اعشار
- ✅ مدیریت خطا برای ورودی‌های نامعتبر
- ✅ رابط کاربری ساده و واکنش‌گرا

## 💻 تکنولوژی‌های استفاده شده
![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)

## 🚀 نحوه اجرای پروژه
1. دانلود فایل‌های پروژه:
   ```bash
   git clone [آدرس ریپوزیتوری]
   ```

2. باز کردن فایل index.html در مرورگر

🛠 توضیحات فنی
ساختار پروژه

    index.html: ساختار اصلی صفحه
    style.css: استایل‌های ظاهری
    script.js: منطق محاسباتی پروژه




# تمرین دستگرمی اول برنامه‌نویس وب: تگ با حساب و کتاب

**دانشگاه صنعتی شریف**

**درس برنامه‌نویسی وب - بهار 1404 (یا 2025)**

**ارائه‌دهنده:** علی هاشمیان

**شماره دانشجویی:** 401106685

[![لوگو دانشگاه صنعتی شریف](https://upload.wikimedia.org/wikipedia/commons/4/42/Sharif-University-of-Technology.jpg)](https://www.sharif.edu/)

---

## شرح تمرین

این تمرین به عنوان اولین تمرین دستگرمی در درس برنامه‌نویسی وب در ترم بهار 1404 (یا 2025) دانشگاه صنعتی شریف ارائه شده است. هدف از این تمرین، آشنایی بیشتر با درخت DOM و دستکاری آن با استفاده از جاوا اسکریپت، و همچنین درک بهتر مفهوم صفحات وب پویا می‌باشد.

در این تمرین، ما قصد داریم قابلیتی را به صفحات HTML اضافه کنیم که به وسیله آن بتوانیم محاسباتی را بر اساس مقادیر ورودی‌های مختلف (مانند `input` های متنی) انجام داده و نتیجه را به صورت پویا در صفحه نمایش دهیم. برای این منظور، یک تگ HTML سفارشی به نام `<formula>` تعریف شده است که وظیفه نمایش نتیجه محاسبات را بر عهده دارد.

### مسئله

فرض کنید در یک صفحه HTML، چندین فیلد ورودی متن (`<input type="text">`) وجود دارد که هر کدام دارای یک `id` منحصر به فرد هستند. همچنین، تگ‌های `<formula>` در صفحه وجود دارند که هر کدام دارای یک خصوصیت (`attribute`) به نام `evaluator` می‌باشند. مقدار این خصوصیت، یک فرمول ریاضی است که بر اساس `id`های فیلدهای ورودی تعریف شده است.

**مثال:**

```html
<input type="text" id="fee" placeholder="قیمت واحد">
<input type="text" id="count" placeholder="تعداد">
<input type="text" id="discount" placeholder="تخفیف">
<formula evaluator="count*fee-discount"></formula>
```

در این مثال، تگ `<formula>` با خصوصیت `evaluator="count*fee-discount"` تعریف شده است. انتظار می‌رود که با تغییر مقادیر ورودی‌های "قیمت واحد"، "تعداد" و "تخفیف"، نتیجه فرمول `count*fee-discount` به صورت لحظه‌ای در داخل تگ `<formula>` نمایش داده شود.

**ویژگی‌های مورد انتظار:**

*   **پویایی:** با هر بار تغییر در مقادیر ورودی‌ها، نتیجه فرمول باید بلافاصله به‌روزرسانی شود.
*   **تگ `<formula>` چندگانه:** در یک صفحه HTML می‌تواند چندین تگ `<formula>` با فرمول‌های مختلف وجود داشته باشد.
*   **ReadOnly بودن خروجی:** محتوای تگ `<formula>` که نتیجه فرمول را نمایش می‌دهد، باید فقط خواندنی باشد و کاربر نتواند آن را مستقیماً ویرایش کند.
*   **مدیریت فرمول نامعتبر:** در صورتی که فرمول تعریف شده در `evaluator` نامعتبر باشد (به عنوان مثال، استفاده از شناسه ورودی ناموجود یا خطای سینتکسی در فرمول)، باید عبارت "Invalid Formula" در خروجی نمایش داده شود.
*   **رعایت اصول شیءگرایی:** کد جاوا اسکریپت باید به صورت شیءگرا و با رعایت اصول برنامه‌نویسی صحیح نوشته شود تا قابلیت استفاده مجدد و توسعه‌پذیری آن افزایش یابد.
*   **طراحی و Responsiveness:** صفحه HTML باید از نظر ظاهری زیبا و کاربرپسند بوده و به صورت Responsive طراحی شود تا در دستگاه‌های مختلف به درستی نمایش داده شود.

## روند انجام کار و پیاده‌سازی

برای پیاده‌سازی این تمرین، مراحل زیر انجام شده است:

1.  **ساخت فایل‌های HTML، CSS و JavaScript:**
    *   فایل `index.html`: شامل ساختار اصلی صفحه HTML، فیلدهای ورودی، و تگ‌های `<formula>`.
    *   فایل `style.css`: شامل استایل‌های CSS برای زیباسازی صفحه و ایجاد ظاهر Responsive.
    *   فایل `script.js`: شامل کدهای جاوا اسکریپت برای مدیریت تگ‌های `<formula>` و انجام محاسبات پویا.

2.  **پیاده‌سازی کلاس `FormulaElement` در جاوا اسکریپت:**
    *   برای مدیریت هر تگ `<formula>`، یک کلاس به نام `FormulaElement` در جاوا اسکریپت ایجاد شده است.
    *   **سازنده کلاس (`constructor`):**
        *   دریافت المان `<formula>` به عنوان ورودی.
        *   استخراج فرمول از خصوصیت `evaluator`.
        *   استخراج `id`های ورودی‌های مورد نیاز فرمول با استفاده از عبارات منظم (Regular Expressions).
        *   یافتن المان‌های ورودی HTML بر اساس `id`های استخراج شده.
        *   ایجاد رویداد گوش‌دهنده (`event listener`) برای رویداد `input` در هر یک از المان‌های ورودی. با وقوع رویداد `input` (یعنی تغییر مقدار ورودی)، تابع `updateFormulaResult` فراخوانی می‌شود.
        *   محاسبه و نمایش نتیجه فرمول در هنگام بارگذاری اولیه صفحه با فراخوانی `updateFormulaResult` در سازنده.
    *   **متد `extractInputIds(formula)`:**
        *   این متد فرمول را به عنوان ورودی دریافت کرده و با استفاده از عبارات منظم، `id`های ورودی‌های مورد استفاده در فرمول را استخراج می‌کند. فرض بر این است که `id`ها از حروف و اعداد تشکیل شده‌اند.
    *   **متد `getInputElements(inputIds)`:**
        *   این متد لیستی از `id`ها را دریافت کرده و با استفاده از `document.getElementById()`، المان‌های HTML متناظر را پیدا می‌کند. المان‌های ناموجود فیلتر می‌شوند تا از بروز خطا جلوگیری شود.
    *   **متد `attachEventListeners()`:**
        *   این متد برای هر یک از المان‌های ورودی، یک رویداد گوش‌دهنده برای رویداد `input` اضافه می‌کند. هرگاه مقدار یک ورودی تغییر کند، تابع `updateFormulaResult` فراخوانی می‌شود تا نتیجه فرمول به‌روزرسانی شود.
    *   **متد `updateFormulaResult()`:**
        *   این متد مقادیر فعلی ورودی‌ها را از المان‌های مربوطه دریافت می‌کند.
        *   با استفاده از تابع `Function` در جاوا اسکریپت، یک تابع پویا بر اساس فرمول و مقادیر ورودی‌ها ساخته می‌شود.
        *   تابع پویا اجرا شده و نتیجه محاسبه می‌شود.
        *   نتیجه محاسبه شده در `textContent` المان `<formula>` نمایش داده می‌شود.
        *   در صورت بروز خطا در ارزیابی فرمول (مانند فرمول نامعتبر یا تقسیم بر صفر)، عبارت "Invalid Formula" در خروجی نمایش داده می‌شود.

3.  **راه‌اندازی و اعمال کلاس `FormulaElement`:**
    *   در فایل `script.js`، پس از بارگذاری کامل DOM (`DOMContentLoaded` event)، تمام المان‌های `<formula>` با استفاده از `document.querySelectorAll('formula')` انتخاب می‌شوند.
    *   برای هر المان `<formula>`، یک نمونه جدید از کلاس `FormulaElement` ساخته می‌شود تا مدیریت آن المان به کلاس سپرده شود.

4.  **طراحی و استایل‌دهی با CSS:**
    *   فایل `style.css` شامل استایل‌های پایه برای صفحه، کانتینرها، فیلدهای ورودی و خروجی فرمول می‌باشد.
    *   استایل‌ها به گونه‌ای طراحی شده‌اند که صفحه ظاهری مرتب و کاربرپسند داشته باشد و در اندازه‌های مختلف صفحه نمایش به خوبی نمایش داده شود (Responsive Design).
    *   جهت متن به صورت راست به چپ (`direction: rtl;`) تنظیم شده است تا برای زبان فارسی مناسب باشد.

## نحوه استفاده

برای اجرای این تمرین، کافی است مراحل زیر را دنبال کنید:

1.  **دانلود یا کلون کردن ریپازیتوری:** ابتدا ریپازیتوری گیت‌هاب را دانلود یا کلون کنید.
2.  **باز کردن فایل `index.html`:** فایل `index.html` را در یک مرورگر وب (مانند Chrome، Firefox، Safari و غیره) باز کنید.
3.  **وارد کردن مقادیر:** مقادیر مورد نظر را در فیلدهای ورودی متن وارد کنید.
4.  **مشاهده نتایج:** با تغییر مقادیر ورودی‌ها، نتایج فرمول‌ها به صورت لحظه‌ای در زیر هر فرمول نمایش داده می‌شود.
5.  **آزمایش فرمول‌های مختلف:** می‌توانید فرمول‌های مختلف را در خصوصیت `evaluator` تگ‌های `<formula>` تغییر دهید و عملکرد برنامه را با فرمول‌های گوناگون تست کنید.

## ساختار فایل‌ها

*   `index.html`: فایل اصلی HTML شامل ساختار صفحه و عناصر فرمول.
*   `script.js`: فایل جاوا اسکریپت شامل منطق برنامه و کلاس `FormulaElement`.
*   `style.css`: فایل CSS شامل استایل‌های صفحه.
*   `README.md`: فایل حاضر، توضیحات و مستندات تمرین.



سلام و عید شما هم مبارک! با کمال میل یک فایل README زیبا و حرفه‌ای برای پروژه شما طراحی می‌کنم.

<div dir="rtl">

# تگ با حساب و کتاب - پیاده‌سازی محاسبه‌گر پویا

<p align="center">
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/42/Sharif-University-of-Technology.jpg" alt="لوگوی دانشگاه صنعتی شریف" width="200">
</p>

<p align="center">
  <b>دانشگاه صنعتی شریف</b><br>
  دانشکده مهندسی کامپیوتر<br>
  درس برنامه‌نویسی وب - بهار ۱۴۰۴
</p>

<p align="center">
  <b>علی هاشمیان</b><br>
  شماره دانشجویی: ۴۰۱۱۰۶۶۸۵
</p>

## فهرست محتوا
- [مقدمه](#مقدمه)
- [شرح مسئله](#شرح-مسئله)
- [ساختار پروژه](#ساختار-پروژه)
- [نحوه پیاده‌سازی](#نحوه-پیاده-سازی)
  - [کلاس FormulaElement](#کلاس-formulaelement)
  - [روند اجرا](#روند-اجرا)
- [نمونه استفاده](#نمونه-استفاده)
- [چالش‌ها و راه‌حل‌ها](#چالش-ها-و-راه-حل-ها)
- [نتیجه‌گیری](#نتیجه-گیری)
- [منابع](#منابع)

## مقدمه

این پروژه در راستای تمرین دستگرمی اول درس برنامه‌نویسی وب با عنوان "تگ با حساب و کتاب" انجام شده است. هدف از این پروژه، پیاده‌سازی یک محاسبه‌گر پویا با استفاده از JavaScript و DOM است که بتواند بر اساس ورودی‌های کاربر، محاسبات را به صورت آنی انجام دهد.

## شرح مسئله

در این پروژه، هدف ایجاد یک تگ سفارشی `<formula>` است که می‌تواند عبارات ریاضی را بر اساس مقادیر ورودی‌های HTML محاسبه کند. این تگ دارای یک ویژگی `evaluator` است که فرمول محاسباتی را در خود نگه می‌دارد. با تغییر هر یک از ورودی‌ها، نتیجه محاسبه به صورت آنی به‌روزرسانی می‌شود.

## ساختار پروژه

پروژه از سه فایل اصلی تشکیل شده است:

1. **index.html**: ساختار HTML صفحه و تعریف تگ‌های `<formula>`
2. **script.js**: منطق جاوااسکریپت برای محاسبه فرمول‌ها
3. **style.css**: استایل‌دهی به صفحه و المان‌ها

## نحوه پیاده‌سازی

### کلاس FormulaElement

قلب این پروژه، کلاس `FormulaElement` است که برای هر تگ `<formula>` یک نمونه از آن ایجاد می‌شود. این کلاس مسئولیت‌های زیر را بر عهده دارد:

1. **استخراج شناسه‌های ورودی از فرمول**:
   ```javascript
   extractInputIds(formula) {
       const regex = /([a-zA-Z0-9]+)/g;
       let matches = formula.match(regex);
       return matches ? matches.filter(match => !['+', '-', '*', '/', '(', ')'].includes(match)) : [];
   }
   ```

2. **دریافت المان‌های ورودی مرتبط**:
   ```javascript
   getInputElements(inputIds) {
       return inputIds.map(id => document.getElementById(id)).filter(element => element);
   }
   ```

3. **اتصال رویدادهای ورودی**:
   ```javascript
   attachEventListeners() {
       this.inputElements.forEach(inputElement => {
           inputElement.addEventListener('input', () => this.updateFormulaResult());
       });
   }
   ```

4. **به‌روزرسانی نتیجه فرمول**:
   ```javascript
   updateFormulaResult() {
       const values = {};
       this.inputIds.forEach((id, index) => {
           const element = this.inputElements[index];
           if (element) {
               const value = parseFloat(element.value);
               values[id] = isNaN(value) ? 0 : value;
           } else {
               values[id] = 0;
           }
       });

       try {
           const formulaFunction = new Function(...Object.keys(values), `return ${this.formula};`);
           const result = formulaFunction(...Object.values(values));

           if (typeof result === 'number') {
               this.element.textContent = result.toFixed(2);
           } else {
               this.element.textContent = 'Invalid Formula Result';
           }
       } catch (error) {
           console.error("Formula evaluation error:", error);
           this.element.textContent = 'Invalid Formula';
       }
   }
   ```

### روند اجرا

1. با بارگذاری صفحه، رویداد `DOMContentLoaded` فعال می‌شود.
2. تمام تگ‌های `<formula>` در صفحه پیدا می‌شوند.
3. برای هر تگ، یک نمونه از کلاس `FormulaElement` ایجاد می‌شود.
4. کلاس `FormulaElement` شناسه‌های ورودی را از فرمول استخراج می‌کند.
5. برای هر ورودی، یک شنونده رویداد `input` اضافه می‌شود.
6. با تغییر هر ورودی، متد `updateFormulaResult` فراخوانی می‌شود.
7. نتیجه محاسبه در محتوای تگ `<formula>` نمایش داده می‌شود.

## نمونه استفاده

در این پروژه، سه نمونه فرمول پیاده‌سازی شده است:

1. **محاسبه قیمت با تخفیف**: `count*fee-discount`
   ```html
   <input type="text" id="fee" placeholder="قیمت واحد">
   <input type="text" id="count" placeholder="تعداد">
   <input type="text" id="discount" placeholder="تخفیف">
   <div class="formula-output">
       نتیجه فرمول 1: <formula evaluator="count*fee-discount"></formula>
   </div>
   ```

2. **محاسبه مساحت**: `width*height`
   ```html
   <input type="text" id="width" placeholder="عرض">
   <input type="text" id="height" placeholder="ارتفاع">
   <div class="formula-output">
       نتیجه فرمول 2: <formula evaluator="width*height"></formula>
   </div>
   ```

3. **فرمول با عملگر نامعتبر**: `number1#number2`
   ```html
   <input type="text" id="number1" placeholder="عدد اول">
   <input type="text" id="number2" placeholder="عدد دوم">
   <div class="formula-output">
       نتیجه فرمول 3: <formula evaluator="number1#number2"></formula>
   </div>
   ```

## چالش‌ها و راه‌حل‌ها

در طول پیاده‌سازی این پروژه با چالش‌های زیر مواجه شدم:

1. **استخراج شناسه‌های ورودی از فرمول**:
   - **چالش**: تشخیص شناسه‌های ورودی از عملگرها و کلمات کلیدی
   - **راه‌حل**: استفاده از عبارت منظم (Regex) برای تشخیص کلمات و فیلتر کردن عملگرها

2. **ارزیابی امن فرمول‌ها**:
   - **چالش**: ارزیابی فرمول‌های ورودی بدون ایجاد خطرات امنیتی
   - **راه‌حل**: استفاده از `Function` constructor برای ایجاد تابع ارزیابی و مدیریت خطاها با `try/catch`

3. **مدیریت ورودی‌های نامعتبر**:
   - **چالش**: رسیدگی به ورودی‌های غیر عددی یا خالی
   - **راه‌حل**: استفاده از `parseFloat` و بررسی `isNaN` برای تبدیل ورودی‌ها به اعداد معتبر

## نتیجه‌گیری

در این پروژه، موفق شدم یک سیستم محاسبه‌گر پویا با استفاده از JavaScript و DOM پیاده‌سازی کنم که می‌تواند فرمول‌های ریاضی را بر اساس ورودی‌های کاربر محاسبه کند. استفاده از اصول برنامه‌نویسی شی‌گرا و رویکرد ماژولار، امکان توسعه و استفاده مجدد از کد را فراهم می‌کند.

این پروژه نشان می‌دهد که چگونه می‌توان با استفاده از JavaScript، رفتارهای پویا را به صفحات وب اضافه کرد و تجربه کاربری بهتری را فراهم نمود.

## منابع

- MDN Web Docs - [Working with objects](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects)
- MDN Web Docs - [Document Object Model (DOM)](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model)
- MDN Web Docs - [Regular expressions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)

</div>
